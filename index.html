<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SEGL Countdown</title>
  <style>
    :root{
      --bg:#ffffff;
      --text:#111111;
      --muted:#6b7280;     /* gray */
      --track:#e5e7eb;     /* light gray */
      --ring:#111111;      /* black */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--text);
      display:grid;
      place-items:center;
      padding:24px;
    }
    .wrap{
      width:min(720px, 95vw);
      text-align:center;
    }
    h1{
      margin:0 0 10px 0;
      font-size:clamp(22px, 3vw, 28px);
      letter-spacing:-0.02em;
      font-weight:700;
    }
    .countdown{
      margin:0 0 18px 0;
      font-size:clamp(24px, 4.2vw, 44px);
      letter-spacing:-0.03em;
      font-weight:700;
    }
    .sub{
      margin:0 0 18px 0;
      color:var(--muted);
      font-size:clamp(13px, 1.8vw, 15px);
    }
    canvas{width:min(520px, 85vw); height:auto; display:block; margin: 0 auto;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>SEGL Countdown</h1>
    <div class="countdown" id="timeleft">—</div>
    <div class="sub" id="daterange">—</div>
    <canvas id="ring" width="900" height="900"></canvas>
  </div>

<script>
  // ✅ EDIT THESE IF YOU NEED
  const START = new Date("2026-01-24T12:00:00-05:00");
  const END   = new Date("2026-05-23T12:00:00-04:00");

  const canvas = document.getElementById("ring");
  const ctx = canvas.getContext("2d");

  function clamp(x,a,b){ return Math.max(a, Math.min(b, x)); }
  function pad(n){ return String(n).padStart(2,"0"); }

  function fmtDate(d){
    return d.toLocaleString(undefined, { month:"short", day:"numeric", year:"numeric", hour:"numeric", minute:"2-digit" });
  }

  function fmtDHMS(ms){
    ms = Math.max(0, ms);
    const s = Math.floor(ms/1000);
    const days = Math.floor(s/86400);
    const hrs  = Math.floor((s%86400)/3600);
    const mins = Math.floor((s%3600)/60);
    const secs = s%60;
    return `${days}d ${pad(hrs)}h ${pad(mins)}m ${pad(secs)}s left`;
  }

  function drawRing(frac){
    frac = clamp(frac, 0, 1);

    const w = canvas.width, h = canvas.height;
    const cx = w/2, cy = h/2;

    const r = Math.min(w,h) * 0.36;
    const line = r * 0.22; // thickness
    const startAngle = -Math.PI/2;
    const endAngle = startAngle + frac * Math.PI * 2;

    ctx.clearRect(0,0,w,h);

    // track
    ctx.beginPath();
    ctx.arc(cx, cy, r, 0, Math.PI*2);
    ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue("--track").trim();
    ctx.lineWidth = line;
    ctx.lineCap = "round";
    ctx.stroke();

    // progress
    ctx.beginPath();
    ctx.arc(cx, cy, r, startAngle, endAngle);
    ctx.strokeStyle = getComputedStyle(document.documentElement).getPropertyValue("--ring").trim();
    ctx.lineWidth = line;
    ctx.lineCap = "round";
    ctx.stroke();

    // center percent (minimal)
    const pct = Math.round(frac * 100);
    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue("--text").trim();
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.font = "700 96px system-ui";
    ctx.fillText(`${pct}%`, cx, cy);
    ctx.font = "500 26px system-ui";
    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue("--muted").trim();
    ctx.fillText("complete", cx, cy + 70);
  }

  function tick(){
    const now = new Date();
    const total = END - START;
    const passed = now - START;
    const frac = clamp(passed / total, 0, 1);

    // Only running countdown: time left
    const remainingMs = END - now;
    document.getElementById("timeleft").textContent = fmtDHMS(remainingMs);

    // small date range (not a countdown)
    document.getElementById("daterange").textContent =
      `${fmtDate(START)} → ${fmtDate(END)}`;

    drawRing(frac);

    setTimeout(tick, 250);
  }

  tick();
</script>
</body>
</html>
